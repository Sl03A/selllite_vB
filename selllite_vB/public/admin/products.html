<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Produits</title><link rel="stylesheet" href="/assets/css/style.css"></head><body><main class="container card"><h1>Produits</h1><div id="list"></div><h3>Ajouter un produit</h3><form id="add"><input name="title" placeholder="Titre" required /><input name="price_cents" placeholder="Prix en cents" required /><button>Ajouter</button></form></main><script>async function load(){const res=await fetch('/admin/api/products'); const list=await res.json(); document.getElementById('list').innerHTML = list.map(p=>`<div style="padding:8px;border-bottom:1px solid rgba(255,255,255,0.03)"><strong>${p.title}</strong> — ${p.price_cents}¢ <button data-id="${p.id}" class="del">Suppr</button></div>`).join(''); document.querySelectorAll('.del').forEach(b=>b.addEventListener('click',async e=>{await fetch('/admin/api/products/'+b.dataset.id,{method:'DELETE'}); load();})); } document.getElementById('add').addEventListener('submit',async e=>{e.preventDefault(); const fd=new FormData(e.target); await fetch('/admin/api/products',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({title:fd.get('title'),slug:fd.get('title').toLowerCase().replace(/\s+/g,'-'),description:'',price_cents:parseInt(fd.get('price_cents')),currency:'eur'})}); load();}); load();</script></body></html>
