<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Admin - Produits</title><link rel="stylesheet" href="/assets/styles.css"></head><body><nav class="nav"><a class="logo" href="/"></a></nav><main class="container"><h1>Produits</h1><div id="list"></div><h3>Ajouter</h3><form id="add"><input name="title" placeholder="Titre" required><input name="price_cents" placeholder="Prix en cents" required><button class="btn">Ajouter</button></form></main><script>async function load(){const res=await fetch('/api/admin/products');const list=await res.json();document.getElementById('list').innerHTML=list.map(p=>`<div class="card">${p.title} — ${p.price_cents}¢ <button data-id="${p.id}" class="del">Suppr</button></div>`).join('');document.querySelectorAll('.del').forEach(b=>b.addEventListener('click',async ()=>{await fetch('/api/admin/products/'+b.dataset.id,{method:'DELETE'});load();}));}document.getElementById('add').addEventListener('submit',async e=>{e.preventDefault();const fd=new FormData(e.target);await fetch('/api/admin/products',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({title:fd.get('title'),slug:fd.get('title').toLowerCase().replace(/\s+/g,'-'),description:'',price_cents:parseInt(fd.get('price_cents')),currency:'EUR'})});load();});load();</script></body></html>
